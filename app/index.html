<!DOCTYPE html>

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>TimmygCentral</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->


    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/skin.css">
    <script src="scripts/vendor/modernizr.min.js"></script>
    <link rel="stylesheet" href="components/fancybox2/jquery.fancybox.css" type="text/css" media="screen" />
    <link href='http://fonts.googleapis.com/css?family=Wellfleet' rel='stylesheet' type='text/css'>  
    <script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>

    <!-- start Mixpanel -->
    <script type="text/javascript">
      (function(e,b){if(!b.__SV){var a,f,i,g;window.mixpanel=b;a=e.createElement("script");a.type="text/javascript";a.async=!0;a.src=("https:"===e.location.protocol?"https:":"http:")+'//cdn.mxpnl.com/libs/mixpanel-2.2.min.js';f=e.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f);b._i=[];b.init=function(a,e,d){function f(b,h){var a=h.split(".");2==a.length&&(b=b[a[0]],h=a[1]);b[h]=function(){b.push([h].concat(Array.prototype.slice.call(arguments,0)))}}var c=b;"undefined"!==
      typeof d?c=b[d]=[]:d="mixpanel";c.people=c.people||[];c.toString=function(b){var a="mixpanel";"mixpanel"!==d&&(a+="."+d);b||(a+=" (stub)");return a};c.people.toString=function(){return c.toString(1)+".people (stub)"};i="disable track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config people.set people.increment people.append people.track_charge people.clear_charges people.delete_user".split(" ");for(g=0;g<i.length;g++)f(c,i[g]);b._i.push([a,
      e,d])};b.__SV=1.2}})(document,window.mixpanel||[]);
      mixpanel.init("69da9f3d3eeea6f70c0b69eeab8e7d66");
    </script>
<!-- end Mixpanel -->  

<script>
    $('div.main').css('visibility','hidden');
</script>
</head>
<body>

<div class="oldIEAlert alert alert-block" style="display: none; text-align: center">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
  <h4>Upgrade your browser you dinosaur!</h4>
  To view this site at it's maximum potential, upgrade to the latest Internet Explorer, or switch to Chrome or Firefox.
</div>

<div class="navLinks">
  <ul class="nav">
    <li><a href="#about"><div class="about navLink"></div></a></li>
    <li><a href="#portfolio"><div class="portfolio navLink"></div></a></li>
    <li class="clearBoth"><a href="#explore"><div class="explore navLink"></div></a></li>
    <li><a href="#contact"><div class="contact navLink"></div></a></li>
    <li><a href="#blog"><div class="blog navLink"></div></a></li>
  </ul>
</div>

     <div class="container">
      <div class="row">
        <div class="span3 left noSelection side">
          <!-- <h3>Recommendations</h3> -->
          <div class="carousel"> &nbsp;
            <ul id='recCarousel' class='jcarousel jcarousel-skin'>
            </ul>
            
          </div>
        </div>
        <div class="span6 main">
           <!-- <div id="home">
            <p>Hey there!</p>
            <p>My name is Tim.  I like to create and learn cool things.</p>
           </div> -->
           <div id="about">
            <span class="tagline">
               <p><span class="taglineShout"><span class="ahoy">Ahoy!</span>
                <br>My name is Tim. I love learning and creating new ways to solve problems big and small.</span></p>
              </span>
             <div class="buttons">
               <a href="https://dl.dropbox.com/u/57301368/tgc/TimothyGiblin_Resume.pdf" target="_blank"><button class="btn btn-inverse">Résumé</button></a>
               <!-- <img src="../images/tg.png" alt=""> -->
               <button class="btn btn-inverse" href="#aboutModal" data-toggle="modal">About This Site</button>
              </div>
           </div>
           <div id="portfolio">
  <div id="portfolioImgContainer">
    <div id="image"> <!-- populate via jQ -->
    </div>
  </div>


<div id="portfolioWrapper" class="noSelection">
<ul id="portfolioImgs" class="noSelection">
</ul>
</div>

           </div>
           <div id="explore">
           </div>
           <div id="contact">
             <!-- <h2>Contact</h2> -->
             <div class="soc">
              <span>
                <div class="wiggler1 left"><a href="https://twitter.com/TimGiblin" target='_blank'><img src="images/social/twitter.png" alt="" class="wiggler left"></a></div>
                 <div class="wiggler2 left"><a href="https://www.linkedin.com/pub/tim-giblin/11/369/670/" target='_blank'><img src="images/social/linkedin.png" alt=""></a></div>
                 <div class="wiggler3 left"><a href="mailto:timmyg13@gmail.com"><img src="images/social/email.png" alt=""></a></div>
               </span>  
               <span class="clearBoth"> 
                 <div class="wiggler4 left"><a href="https://plus.google.com/u/0/106705479981740306704" target='_blank'><img src="images/social/g+.png" alt=""></a></div>
                 <div class="wiggler5 left"><a href="https://www.facebook.com/giblintj?ref=tn_tnmn" target='_blank'><img src="images/social/facebook.png" alt=""></a></div>
                 <div class="wiggler6 left"><a href="https://github.com/timmyg" target='_blank'><img src="images/social/github.png" alt=""></a></div>
               </span>
            </div>
<!--              <p>twitter</p>
             <p>facebook</p>
             <p>email</p>
             <p>linkedin</p>
             <p>github</p>
             <p>bitbucket</p>
 -->           </div>
             <div id="blog"></div>
        </div>
        <div class="span3 right noSelection side">
          <!-- <h3>Tweets</h3> -->
          <div class="carousel">
            <ul id="tweetCarousel" class="jcarousel jcarousel-skin">
            </ul>
          </div>
        </div>
      </div>
      </div>


  <div class="modal hide" id="aboutModal" tabindex="-1">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal"
        aria-hidden="true">×</button>
      <h3 id="myModalLabel">About This Site</h3>
    </div>
    <div class="modal-body">
      <p>I built this site on <a href="https://github.com/timmyg/timmygcentral" target="_blank">GitHub</a> using <a href="http://yeoman.io/" target="_blank">Yeoman</a>, which is a super fast way to build HTML5 apps. Importing new javascript and other components is as easy as typing 'yeoman install backbone' (for example) and it installs it in your project automatically. <a href="http://sass-lang.com" target="_blank">SASS</a> (CSS on steroids) comes built in and is very, very cool.  I used <a href="http://www.sublimetext.com/" target="_blank">Sublime Text 2</a> which is also extremely powerful and fast, and completely mindblowing how efficient it can make your workflow. I used <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a> framework, and <a href="http://sorgalla.com/jcarousel/" target="_blank">jCarousel</a> for the LinkedIn Recommendations and Twitter feed. I am using Google Drive API to host a lot of the data (the explore page, portfolio images, and LinkedIn recommendations...there is a linkedIn API but you need to authenticate and I didn't want to have to create server side code just for that). I am an aspiring rookie designer but designed everything in Adobe Illustrator through <a href="http://net.tutsplus.com/" target="_blank">Nettuts+</a> tutorials and learning it along the way.</p>
      <p>If you have any questions or any feedback, please hit me up through the contact section.</p>
    </div>
    <div class="modal-footer">
      <button id="okButton" class="btn" data-dismiss="modal"
        aria-hidden="true">Cool</button>
    </div>
  </div>

  <div class="modal hide" id="blog-modal" tabindex="-1">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal"
        aria-hidden="true"></button>
      <h3 class="blog-title"></h3> <button id="okButton" style class="btn" data-dismiss="modal" aria-hidden="true">X</button>
    </div>
    <div class="blog-content">
    </div>
    <div class="blog-footer">
    </div>
  </div>

    <!-- build:js scripts/plugins.js -->
    <script src="components/underscore/underscore.js"></script>
    <script src="components/backbone/backbone.js"></script>
    <script src="components/mustache/mustache.js"></script>
    <script src="scripts/vendor/bootstrap/bootstrap.js"></script>
    <script src="components/jcarousel/jquery.jcarousel.min.js"></script>
    <script src="components/jquery-easing/jquery.easing.min.js"></script>
    <script src="scripts/tweets.js"></script> 
    <!--<script src="scripts/jquery.jsonp-2.4.0.min.js"></script> -->
    <script src="scripts/app.js"></script> 
    <script src="scripts/google-spreadsheet.js"></script> 
    <script src="components/jquery-timeago/jquery.timeago.js"></script> 
    <script src="components/jquery-json/jquery.json-2.4.min.js"></script>
    <script type="text/javascript" src="components/fancybox2/jquery.fancybox.pack.js">
  </script> <!--do not used pack as patched reg version for jQ 1.9-->
    <!-- endbuild -->
    
<script>

//fade in while loading
$('.carousel').hide().delay(500).fadeIn(900);

  function randomizeList(myArray) {
    var i = myArray.length, j, tempi, tempj;
    if ( i == 0 ) return false;
    while ( --i ) {
       j = Math.floor( Math.random() * ( i + 1 ) );
       tempi = myArray[i];
       tempj = myArray[j];
       myArray[i] = tempj;
       myArray[j] = tempi;
     }
     return myArray;
  }


var tgc_recommendations_uri = "https://spreadsheets.google.com/feeds/list/0AsRjUFPfaIWvdGxPT3U0ZGRNUnFGakwwQnpKQi1Hbnc/od6/public/values?alt=json";
var tgc_explore_uri = "https://spreadsheets.google.com/feeds/list/0AsRjUFPfaIWvdHZ5ZjhqMVdrcnlSUzh3ZU56YV9XZ2c/od6/public/values?alt=json";
var tgc_portfolio_uri = "https://spreadsheets.google.com/feeds/list/0AsRjUFPfaIWvdFdnR3RIVHV3NGU1UnpjYWh3RjNSclE/od6/public/values?alt=json";
var tgc_wp_blog = "http://timmyg13.byethost12.com/tgc-wp/?json=get_recent_posts";

function ensureJson(stringOrJSON){
  if($.type(stringOrJSON) === "string")stringOrJSON = $.parseJSON(stringOrJSON);
  return stringOrJSON;
}

  function loadRecommendations(){
    $.ajax({
      cache: false,
      type: "GET",
      url: tgc_recommendations_uri,
      dataType: "jsonp",
      async:false,
      success: function(data){
        $('#recCarousel').css('opacity','0')
        data = ensureJson(data);
        randomizeList(data.feed.entry);
        var template = "{{#entry}}<li><p>\"{{gsx$rec.$t}}\"</p>{{#gsx$qualities.$t}}Top Qualities:<p>{{gsx$qualities.$t}}</p>{{/gsx$qualities.$t}}{{gsx$name.$t}} {{gsx$date.$t}} {{gsx$company.$t}}</li>{{/entry}}</ul>";
        data = ensureJson(data);
        var html = Mustache.to_html(template, data.feed);
        $('#recCarousel').append(html);
        $('#recCarousel').jcarousel({
            easing: 'easeInBack',
            wrap: 'both',
            scroll: 1,
            random: true,
            auto: 20
          });
        $('#recCarousel').animate({opacity: 1}, 1000);
        $('.left .jcarousel-item').wrap('<a target="_blank" title="LinkedIn Recommendation" href="https://www.linkedin.com/pub/tim-giblin/11/369/670/" />');
        if( window.location.hash === '' || window.location.hash === '#about'){
          $('div.main #about').css('visibility','visible').hide().delay(2000).fadeIn(3000);
          $('div.main #about').children().css('visibility','visible').hide().delay(2000).fadeIn(7000);
        }
      }
    });
  } 

  function loadBlog(){
    $.ajax({
      cache: false,
      type: "GET",
      url: tgc_wp_blog,
      dataType: "jsonp",
      async:false,
      success: function(data){
        $('#blog').css('opacity','0')
        data = ensureJson(data);
        randomizeList(data);
        var template = "<ul> {{#posts}} <li><a class='blog-title' href='#blog-modal' data-toggle='modal'><h3 class=\"blog-title\">{{title}}</h3></a> {{{excerpt}}} <div class='content hidden'>{{{content}}}</div> </li> {{/posts}} </ul>"; 
        data = ensureJson(data);
        var str = Mustache.to_html(template, data);
        var html = $.parseHTML(str);
        $('#blog').html(str);
        $('#blog').animate({opacity: 1}, 1000);
        loadBlogListeners();
        // $('.left .jcarousel-item').wrap('<a target="_blank" title="LinkedIn Recommendation" href="https://www.linkedin.com/pub/tim-giblin/11/369/670/" />');
        // $('div.main #about').css('visibility','visible').hide().delay(2000).fadeIn(3000);
        // $('div.main #about').children().css('visibility','visible').hide().delay(2000).fadeIn(7000);
      }
    });
  }

  function loadBlogListeners(){
    $('a.blog-title').click(function(b){
      console.log($(this));
      $('#blog-modal .blog-title').html($(this).text());
      $('#blog-modal .blog-content').html($(this).siblings('.content').text());
      // $('#blog-modal').show();
      $('#blog-modal #okButton').click(function(){
        $('#blog-modal').hide();
      });
    });

  }

  function loadExplore(){
  $.ajax({
      type: "GET",
      url: tgc_explore_uri,
      format: "jsonp",
      success: function(data){
        data = ensureJson(data);
        // randomizeList(data.feed.entry);
        var template = "{{#entry}}<div class='exploreWrapper'><a href='{{gsx$link.$t}}' target='_blank'><img src={{gsx$logo.$t}} /></a><p>{{gsx$description.$t}}</p></div>{{/entry}}";
        data = ensureJson(data);
        var html = Mustache.to_html(template, data.feed);
        $('#explore').append(html);
      }
    });
  }

  function loadPortfolio(){
    $.ajax({
      type: "GET",
      url: tgc_portfolio_uri,
      format: "jsonp",
      success: function(data){
        data = ensureJson(data);
        // title?
        var template = "{{#entry}}<li><a href='{{gsx$photo.$t}}' title='{{gsx$title.$t}}' rel='{{gsx$photo.$t}}' class='fancybox'><img src='{{gsx$thumb.$t}}' class='thumb' border='0'/></a></li>{{/entry}}";
        data = ensureJson(data);
        var html = Mustache.to_html(template, data.feed);
        $('#portfolio #portfolioImgs').append(html);
        //populate portfolio main image
        var firstImgPath = data.feed.entry[0].gsx$photo.$t;
        var firstImgTitle = data.feed.entry[0].gsx$title.$t;
        $('#portfolioImgContainer #image').append("<a class=\"fancybox\" title=\""+firstImgTitle+"\" href=\""+firstImgPath+"\"><img src=\""+firstImgPath+"\"/></a>");

        $('#portfolioImgs img').bind('click', function(e){
          var image = $(this).parent().attr("rel");
          var title = $(this).parent().attr("title");
            var html = "<a class=\"fancybox\" href=\""+image+"\" title=\""+title+"\">"+
                       "  <img src=\""+image+"\"/>"+
                       "</a>";
            $('#image').hide();
            $('#image').fadeIn('slow');
            $('#image').html(html); 
            fancyboxize();
            
            return false;
            });
        //preload images
        preloadImages();        
      }
    });
  }

  function preloadImages() {
    // var arrayOfImages = $();
    $('#portfolioImgs img').each(function(){
      try{
        $('')[0].src = this; //9
        var bigImg = $(this).clone();
        var bigImg2 = bigImg.attr('src', bigImg.attr('src').replace("t.png", ".png"));
        $('')[0].src = bigImg2[0].src;//9
        // Alternatively you could use:
        // (new Image()).src = this;
        // $('')[0].src = this;
      }catch(e){
        //swallow
      }
    });
    // console.log('images preloaded');
}

  function fancyboxize(){
      $(".fancybox").fancybox({
      });
  }   

</script>

<script>


    $(document).ready(function($) {
      loadRecommendations();
      loadPortfolio();
      loadExplore();
      loadBlog();
      fancyboxize();
      $('.right div.jcarousel-next-vertical').change(function() {
          console.log('change');
      });
      var maxSupportedIEVersion = 9;
      if ($.browser.msie && parseInt($.browser.version, 10) < maxSupportedIEVersion) {
         $('.oldIEAlert').css('display','block');
      }

      $('.about').click(function(){
        $('div.main #about').css('visibility','visible').show();
        $('div.main #about').children().css('visibility','visible').show();
      });

      mixpanel.track("Visit");
//       var picData = [
// 'https://dl.dropbox.com/u/57301368/tgc/portfolio/7.png',
// 'https://dl.dropbox.com/u/57301368/tgc/portfolio/8.png',
// 'https://dl.dropbox.com/u/57301368/tgc/portfolio/9.png'
//       ]
//       picO = new Array()
//       for(i=0; i < picData.length; i++){
//           picO[i] = new Image();
//           picO[i].src = picData[i];
//       }
    });

    $(window).load(function() {
      // When the page has loaded
      $("body").fadeIn(2000);
    });

    
</script>
</body>

</html>